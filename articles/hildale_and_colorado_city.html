<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>City Population Data: Measles Outbreak Modeling Comparison • multigroup.vaccine</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="City Population Data: Measles Outbreak Modeling Comparison">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">multigroup.vaccine</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/combined_cities.html">Combined City Population: Measles Outbreak Modeling</a></li>
    <li><a class="dropdown-item" href="../articles/contact_matrix_examples.html">Contact Matrix Examples</a></li>
    <li><a class="dropdown-item" href="../articles/epiworld_comparison.html">Comparison to epiworld</a></li>
    <li><a class="dropdown-item" href="../articles/hildale_and_colorado_city.html">City Population Data: Measles Outbreak Modeling Comparison</a></li>
    <li><a class="dropdown-item" href="../articles/measles_agemodel.html">Measles Age-Structured Model</a></li>
    <li><a class="dropdown-item" href="../articles/measles_example.html">Measles Outbreak Example</a></li>
    <li><a class="dropdown-item" href="../articles/measles_example2.html">Measles Outbreak Example 2</a></li>
    <li><a class="dropdown-item" href="../articles/run_model_on_command_line.html">Run Model in the console</a></li>
    <li><a class="dropdown-item" href="../articles/sensitivity_analysis.html">Sensitivity Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/utah_census_comparison.html">Utah Census Data: Measles Outbreak Modeling Comparison</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>City Population Data: Measles Outbreak Modeling Comparison</h1>
            
      

      <div class="d-none name"><code>hildale_and_colorado_city.Rmd</code></div>
    </div>

    
    
<style type="text/css">
body {
  max-width: 1100px;
  margin: auto;
  padding: 1em;
}

table {
  width: 100%;
}
</style>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"ggplot2"</span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/stop.html" class="external-link">stop</a></span><span class="op">(</span><span class="st">"Package 'ggplot2' is needed for this vignette. Please install it."</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://epiforesite.github.io/multigroup-vaccine/">multigroup.vaccine</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/epiforecasts/socialmixr" class="external-link">socialmixr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load city data files</span></span>
<span><span class="va">hildale_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"hildale_ut_2023.csv"</span>, package <span class="op">=</span> <span class="st">"multigroup.vaccine"</span><span class="op">)</span></span>
<span><span class="va">colorado_city_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"colorado_city_az_2023.csv"</span>, package <span class="op">=</span> <span class="st">"multigroup.vaccine"</span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="measles-model-setup">Measles Model Setup<a class="anchor" aria-label="anchor" href="#measles-model-setup"></a>
</h2>
<p>For measles outbreak modeling, we’ll use age groups based on the
available ACS data:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Age groups based on ACS 5-year intervals, adjusted to avoid zero populations</span></span>
<span><span class="va">agelims</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">5</span>, <span class="fl">10</span>, <span class="fl">15</span>, <span class="fl">20</span>, <span class="fl">25</span>, <span class="fl">30</span>, <span class="fl">35</span>, <span class="fl">40</span>, <span class="fl">45</span>, <span class="fl">50</span>, <span class="fl">55</span>, <span class="fl">60</span>, <span class="fl">65</span>, <span class="fl">70</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Vaccine effectiveness by age group (adjusted for these age groups)</span></span>
<span><span class="co"># Using approximate values for these broader age categories</span></span>
<span><span class="va">ageveff</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0.97</span>, <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">agelims</span><span class="op">)</span><span class="op">)</span>  <span class="co"># Most age groups have high effectiveness</span></span>
<span><span class="va">ageveff</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">0.93</span>  <span class="co"># Under 5 may have slightly lower effectiveness</span></span>
<span></span>
<span><span class="co"># Initial infection in the 25-29 age group (working age adults)</span></span>
<span><span class="co"># This corresponds to age group 25-29 (index 6)</span></span>
<span><span class="va">initgrp</span> <span class="op">&lt;-</span> <span class="fl">6</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="getting-city-population-data">Getting City Population Data<a class="anchor" aria-label="anchor" href="#getting-city-population-data"></a>
</h2>
<p>The <code>getCityData</code> function provides flexible age grouping
options:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Default 5-year groups</strong>: Matches the ACS data
structure</li>
<li>
<strong>Single-year ages</strong>: Set
<code>age_groups = NULL</code> to disaggregate 5-year groups
uniformly</li>
<li>
<strong>Custom age groups</strong>: Specify any age limits
vector</li>
</ol>
<p>Let’s demonstrate these options with Hildale, UT data:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Example 1: Default 5-year age groups (0-4, 5-9, 10-14, ...)</span></span>
<span><span class="va">hildale_5yr</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getCityData.html">getCityData</a></span><span class="op">(</span></span>
<span>  city_name <span class="op">=</span> <span class="st">"Hildale city, Utah"</span>,</span>
<span>  csv_path <span class="op">=</span> <span class="va">hildale_path</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Aggregating ages 0 to 4: sum = 57</span></span>
<span><span class="co">#&gt; Aggregating ages 5 to 9: sum = 110</span></span>
<span><span class="co">#&gt; Aggregating ages 10 to 14: sum = 181</span></span>
<span><span class="co">#&gt; Aggregating ages 15 to 19: sum = 157</span></span>
<span><span class="co">#&gt; Aggregating ages 20 to 24: sum = 134</span></span>
<span><span class="co">#&gt; Aggregating ages 25 to 29: sum = 128</span></span>
<span><span class="co">#&gt; Aggregating ages 30 to 34: sum = 55</span></span>
<span><span class="co">#&gt; Aggregating ages 35 to 39: sum = 110</span></span>
<span><span class="co">#&gt; Aggregating ages 40 to 44: sum = 59</span></span>
<span><span class="co">#&gt; Aggregating ages 45 to 49: sum = 105</span></span>
<span><span class="co">#&gt; Aggregating ages 50 to 54: sum = 64</span></span>
<span><span class="co">#&gt; Aggregating ages 55 to 59: sum = 32</span></span>
<span><span class="co">#&gt; Aggregating ages 60 to 64: sum = 29</span></span>
<span><span class="co">#&gt; Aggregating ages 65 to 69: sum = 35</span></span>
<span><span class="co">#&gt; Aggregating ages 70 to 74: sum = 0</span></span>
<span><span class="co">#&gt; Aggregating ages 75 to 79: sum = 27</span></span>
<span><span class="co">#&gt; Aggregating ages 80 to 84: sum = 18</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Example 1: Default 5-year age groups\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Example 1: Default 5-year age groups</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Total population:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="va">hildale_5yr</span><span class="op">$</span><span class="va">total_pop</span>, big.mark <span class="op">=</span> <span class="st">","</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Total population: 1,301</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Number of age groups:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">hildale_5yr</span><span class="op">$</span><span class="va">age_pops</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Number of age groups: 18</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"First few groups:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">hildale_5yr</span><span class="op">$</span><span class="va">age_labels</span>, <span class="fl">3</span><span class="op">)</span>, collapse <span class="op">=</span> <span class="st">", "</span><span class="op">)</span>, <span class="st">"\n\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; First few groups: 0to4, 5to9, 10to14</span></span>
<span></span>
<span><span class="co"># Example 2: Single-year ages (disaggregated from 5-year ACS groups)</span></span>
<span><span class="va">hildale_1yr</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getCityData.html">getCityData</a></span><span class="op">(</span></span>
<span>  city_name <span class="op">=</span> <span class="st">"Hildale city, Utah"</span>,</span>
<span>  csv_path <span class="op">=</span> <span class="va">hildale_path</span>,</span>
<span>  age_groups <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Example 2: Single-year ages (disaggregated)\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Example 2: Single-year ages (disaggregated)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Total population:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="va">hildale_1yr</span><span class="op">$</span><span class="va">total_pop</span>, big.mark <span class="op">=</span> <span class="st">","</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Total population: 1,301</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Number of age groups:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">hildale_1yr</span><span class="op">$</span><span class="va">age_pops</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Number of age groups: 86</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"First few ages:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">hildale_1yr</span><span class="op">$</span><span class="va">age_labels</span>, <span class="fl">5</span><span class="op">)</span>, collapse <span class="op">=</span> <span class="st">", "</span><span class="op">)</span>, <span class="st">"\n\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; First few ages: age0, age1, age2, age3, age4</span></span>
<span></span>
<span><span class="co"># Example 3: Custom age groups (0-18, 18-65, 65+)</span></span>
<span><span class="va">hildale_custom</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getCityData.html">getCityData</a></span><span class="op">(</span></span>
<span>  city_name <span class="op">=</span> <span class="st">"Hildale city, Utah"</span>,</span>
<span>  csv_path <span class="op">=</span> <span class="va">hildale_path</span>,</span>
<span>  age_groups <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">18</span>, <span class="fl">65</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Aggregating ages 0 to 17: sum = 442.2</span></span>
<span><span class="co">#&gt; Aggregating ages 18 to 64: sum = 778.8</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Example 3: Custom age groups (0-18, 18-65, 65+)\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Example 3: Custom age groups (0-18, 18-65, 65+)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Total population:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="va">hildale_custom</span><span class="op">$</span><span class="va">total_pop</span>, big.mark <span class="op">=</span> <span class="st">","</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Total population: 1,301</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_along</a></span><span class="op">(</span><span class="va">hildale_custom</span><span class="op">$</span><span class="va">age_labels</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">pct</span> <span class="op">&lt;-</span> <span class="fl">100</span> <span class="op">*</span> <span class="va">hildale_custom</span><span class="op">$</span><span class="va">age_pops</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">/</span> <span class="va">hildale_custom</span><span class="op">$</span><span class="va">total_pop</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"  %s: %s (%.1f%%)\n"</span>,</span>
<span>              <span class="va">hildale_custom</span><span class="op">$</span><span class="va">age_labels</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>,</span>
<span>              <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="va">hildale_custom</span><span class="op">$</span><span class="va">age_pops</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>, big.mark <span class="op">=</span> <span class="st">","</span><span class="op">)</span>,</span>
<span>              <span class="va">pct</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="co">#&gt;   0to17: 442.2 (34.0%)</span></span>
<span><span class="co">#&gt;   18to64: 778.8 (59.9%)</span></span>
<span><span class="co">#&gt;   65plus: 80 (6.1%)</span></span></code></pre></div>
<p>Now let’s retrieve population data for both cities using our custom
age groups for measles modeling:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cities</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Hildale city, Utah"</span>, <span class="st">"Colorado City town, Arizona"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">city_data_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">city</span> <span class="kw">in</span> <span class="va">cities</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"Hildale"</span>, <span class="va">city</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">csv_path</span> <span class="op">&lt;-</span> <span class="va">hildale_path</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>    <span class="va">csv_path</span> <span class="op">&lt;-</span> <span class="va">colorado_city_path</span></span>
<span>  <span class="op">}</span></span>
<span></span>
<span>  <span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getCityData.html">getCityData</a></span><span class="op">(</span></span>
<span>    city_name <span class="op">=</span> <span class="va">city</span>,</span>
<span>    csv_path <span class="op">=</span> <span class="va">csv_path</span>,</span>
<span>    age_groups <span class="op">=</span> <span class="va">agelims</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span>  <span class="va">city_data_list</span><span class="op">[[</span><span class="va">city</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">data</span></span>
<span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\n"</span>, <span class="va">city</span>, <span class="st">":\n"</span>, sep <span class="op">=</span> <span class="st">""</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"  Total population:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">total_pop</span>, big.mark <span class="op">=</span> <span class="st">","</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"  Age distribution:\n"</span><span class="op">)</span></span>
<span>  <span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_along</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">age_labels</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">pct</span> <span class="op">&lt;-</span> <span class="fl">100</span> <span class="op">*</span> <span class="va">data</span><span class="op">$</span><span class="va">age_pops</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">/</span> <span class="va">data</span><span class="op">$</span><span class="va">total_pop</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"    %s: %s (%.1f%%)\n"</span>,</span>
<span>                <span class="va">data</span><span class="op">$</span><span class="va">age_labels</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>,</span>
<span>                <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">age_pops</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>, big.mark <span class="op">=</span> <span class="st">","</span><span class="op">)</span>,</span>
<span>                <span class="va">pct</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span>
<span><span class="co">#&gt; Aggregating ages 0 to 4: sum = 57</span></span>
<span><span class="co">#&gt; Aggregating ages 5 to 9: sum = 110</span></span>
<span><span class="co">#&gt; Aggregating ages 10 to 14: sum = 181</span></span>
<span><span class="co">#&gt; Aggregating ages 15 to 19: sum = 157</span></span>
<span><span class="co">#&gt; Aggregating ages 20 to 24: sum = 134</span></span>
<span><span class="co">#&gt; Aggregating ages 25 to 29: sum = 128</span></span>
<span><span class="co">#&gt; Aggregating ages 30 to 34: sum = 55</span></span>
<span><span class="co">#&gt; Aggregating ages 35 to 39: sum = 110</span></span>
<span><span class="co">#&gt; Aggregating ages 40 to 44: sum = 59</span></span>
<span><span class="co">#&gt; Aggregating ages 45 to 49: sum = 105</span></span>
<span><span class="co">#&gt; Aggregating ages 50 to 54: sum = 64</span></span>
<span><span class="co">#&gt; Aggregating ages 55 to 59: sum = 32</span></span>
<span><span class="co">#&gt; Aggregating ages 60 to 64: sum = 29</span></span>
<span><span class="co">#&gt; Aggregating ages 65 to 69: sum = 35</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Hildale city, Utah:</span></span>
<span><span class="co">#&gt;   Total population: 1,301 </span></span>
<span><span class="co">#&gt;   Age distribution:</span></span>
<span><span class="co">#&gt;     0to4: 57 (4.4%)</span></span>
<span><span class="co">#&gt;     5to9: 110 (8.5%)</span></span>
<span><span class="co">#&gt;     10to14: 181 (13.9%)</span></span>
<span><span class="co">#&gt;     15to19: 157 (12.1%)</span></span>
<span><span class="co">#&gt;     20to24: 134 (10.3%)</span></span>
<span><span class="co">#&gt;     25to29: 128 (9.8%)</span></span>
<span><span class="co">#&gt;     30to34: 55 (4.2%)</span></span>
<span><span class="co">#&gt;     35to39: 110 (8.5%)</span></span>
<span><span class="co">#&gt;     40to44: 59 (4.5%)</span></span>
<span><span class="co">#&gt;     45to49: 105 (8.1%)</span></span>
<span><span class="co">#&gt;     50to54: 64 (4.9%)</span></span>
<span><span class="co">#&gt;     55to59: 32 (2.5%)</span></span>
<span><span class="co">#&gt;     60to64: 29 (2.2%)</span></span>
<span><span class="co">#&gt;     65to69: 35 (2.7%)</span></span>
<span><span class="co">#&gt;     70plus: 45 (3.5%)</span></span>
<span><span class="co">#&gt; Aggregating ages 0 to 4: sum = 125</span></span>
<span><span class="co">#&gt; Aggregating ages 5 to 9: sum = 213</span></span>
<span><span class="co">#&gt; Aggregating ages 10 to 14: sum = 435</span></span>
<span><span class="co">#&gt; Aggregating ages 15 to 19: sum = 478</span></span>
<span><span class="co">#&gt; Aggregating ages 20 to 24: sum = 289</span></span>
<span><span class="co">#&gt; Aggregating ages 25 to 29: sum = 215</span></span>
<span><span class="co">#&gt; Aggregating ages 30 to 34: sum = 145</span></span>
<span><span class="co">#&gt; Aggregating ages 35 to 39: sum = 91</span></span>
<span><span class="co">#&gt; Aggregating ages 40 to 44: sum = 81</span></span>
<span><span class="co">#&gt; Aggregating ages 45 to 49: sum = 131</span></span>
<span><span class="co">#&gt; Aggregating ages 50 to 54: sum = 168</span></span>
<span><span class="co">#&gt; Aggregating ages 55 to 59: sum = 132</span></span>
<span><span class="co">#&gt; Aggregating ages 60 to 64: sum = 70</span></span>
<span><span class="co">#&gt; Aggregating ages 65 to 69: sum = 7</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Colorado City town, Arizona:</span></span>
<span><span class="co">#&gt;   Total population: 2,598 </span></span>
<span><span class="co">#&gt;   Age distribution:</span></span>
<span><span class="co">#&gt;     0to4: 125 (4.8%)</span></span>
<span><span class="co">#&gt;     5to9: 213 (8.2%)</span></span>
<span><span class="co">#&gt;     10to14: 435 (16.7%)</span></span>
<span><span class="co">#&gt;     15to19: 478 (18.4%)</span></span>
<span><span class="co">#&gt;     20to24: 289 (11.1%)</span></span>
<span><span class="co">#&gt;     25to29: 215 (8.3%)</span></span>
<span><span class="co">#&gt;     30to34: 145 (5.6%)</span></span>
<span><span class="co">#&gt;     35to39: 91 (3.5%)</span></span>
<span><span class="co">#&gt;     40to44: 81 (3.1%)</span></span>
<span><span class="co">#&gt;     45to49: 131 (5.0%)</span></span>
<span><span class="co">#&gt;     50to54: 168 (6.5%)</span></span>
<span><span class="co">#&gt;     55to59: 132 (5.1%)</span></span>
<span><span class="co">#&gt;     60to64: 70 (2.7%)</span></span>
<span><span class="co">#&gt;     65to69: 7 (0.3%)</span></span>
<span><span class="co">#&gt;     70plus: 18 (0.7%)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="scenario-1-current-vaccination-coverage-95-adult-rate">Scenario 1: Current Vaccination Coverage (95% adult rate)<a class="anchor" aria-label="anchor" href="#scenario-1-current-vaccination-coverage-95-adult-rate"></a>
</h2>
<p>Let’s model outbreaks under estimated vaccination coverage levels for
these communities.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Estimated vaccination coverage for these communities</span></span>
<span><span class="co"># These are approximate values based on general Utah/Arizona vaccination rates</span></span>
<span><span class="co"># School age children vaccination rate is based on the data available for 2024</span></span>
<span><span class="co"># For adults, we assume 95% coverage for a conservative modeling approach</span></span>
<span><span class="va">current_coverage_95</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="fl">0.44</span>,  <span class="co"># under 5, assume 1 percentage point lower than 5-9</span></span>
<span>  <span class="fl">0.45</span>,  <span class="co"># 5-9</span></span>
<span>  <span class="fl">0.50</span>,  <span class="co"># 10-14</span></span>
<span>  <span class="fl">0.45</span>,  <span class="co"># 15-19</span></span>
<span>  <span class="fl">0.95</span>,  <span class="co"># 20-24</span></span>
<span>  <span class="fl">0.95</span>,  <span class="co"># 25-29</span></span>
<span>  <span class="fl">0.95</span>,  <span class="co"># 30-34</span></span>
<span>  <span class="fl">0.95</span>,  <span class="co"># 35-39</span></span>
<span>  <span class="fl">0.95</span>,  <span class="co"># 40-44</span></span>
<span>  <span class="fl">0.95</span>,  <span class="co"># 45-49</span></span>
<span>  <span class="fl">0.95</span>,  <span class="co"># 50-54</span></span>
<span>  <span class="fl">0.95</span>,  <span class="co"># 55-59</span></span>
<span>  <span class="fl">0.95</span>,  <span class="co"># 60-64</span></span>
<span>  <span class="fl">0.95</span>,  <span class="co"># 65-69</span></span>
<span>  <span class="fl">1.00</span>   <span class="co"># 70+</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="hildale-utah---current-coverage-95-adult-rate">Hildale, Utah - Current Coverage (95% adult rate)<a class="anchor" aria-label="anchor" href="#hildale-utah---current-coverage-95-adult-rate"></a>
</h3>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">hildale_data</span> <span class="op">&lt;-</span> <span class="va">city_data_list</span><span class="op">[[</span><span class="st">"Hildale city, Utah"</span><span class="op">]</span><span class="op">]</span></span>
<span></span>
<span><span class="va">hildale_current</span> <span class="op">&lt;-</span> <span class="fu">multigroup.vaccine</span><span class="fu">:::</span><span class="fu"><a href="../reference/getOutputTable.html">getOutputTable</a></span><span class="op">(</span></span>
<span>  agelims <span class="op">=</span> <span class="va">agelims</span>,</span>
<span>  agepops <span class="op">=</span> <span class="va">hildale_data</span><span class="op">$</span><span class="va">age_pops</span>,</span>
<span>  agecovr <span class="op">=</span> <span class="va">current_coverage_95</span>,</span>
<span>  ageveff <span class="op">=</span> <span class="va">ageveff</span>,</span>
<span>  initgrp <span class="op">=</span> <span class="va">initgrp</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Hildale, Utah - Current Vaccination Coverage\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Hildale, Utah - Current Vaccination Coverage</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">hildale_current</span><span class="op">)</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt;  R0  R0local        Rv pEscape escapeInfTot under5 5to9 10to14 15to19 20to24</span></span>
<span><span class="co">#&gt;  10 18.02337  9.084099   0.607          324     30   62     93     88     10</span></span>
<span><span class="co">#&gt;  11 19.82571  9.992509   0.619          327     31   62     93     88     10</span></span>
<span><span class="co">#&gt;  12 21.62804 10.900919   0.658          329     31   62     93     88     10</span></span>
<span><span class="co">#&gt;  13 23.43038 11.809329   0.673          330     32   62     93     88     10</span></span>
<span><span class="co">#&gt;  14 25.23272 12.717739   0.717          332     32   62     93     88     11</span></span>
<span><span class="co">#&gt;  15 27.03505 13.626149   0.716          333     33   62     93     88     11</span></span>
<span><span class="co">#&gt;  16 28.83739 14.534559   0.744          333     33   62     93     88     11</span></span>
<span><span class="co">#&gt;  17 30.63973 15.442969   0.734          334     33   62     93     88     11</span></span>
<span><span class="co">#&gt;  18 32.44206 16.351379   0.772          335     33   62     93     88     11</span></span>
<span><span class="co">#&gt;  25to29 30to34 35to39 40to44 45to49 50to54 55to59 60to64 65to69 70+</span></span>
<span><span class="co">#&gt;       9      4      8      5      7      4      2      1      2   0</span></span>
<span><span class="co">#&gt;       9      4      8      5      7      4      2      1      2   0</span></span>
<span><span class="co">#&gt;       9      4      8      5      7      4      2      1      2   1</span></span>
<span><span class="co">#&gt;       9      4      9      5      8      4      2      1      2   1</span></span>
<span><span class="co">#&gt;       9      4      9      5      8      5      2      1      2   1</span></span>
<span><span class="co">#&gt;      10      4      9      5      8      5      3      2      2   1</span></span>
<span><span class="co">#&gt;      10      4      9      5      8      5      3      2      2   1</span></span>
<span><span class="co">#&gt;      10      4      9      5      8      5      3      2      2   1</span></span>
<span><span class="co">#&gt;      10      4      9      5      8      5      3      2      2   1</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="colorado-city-arizona---current-coverage-95-adult-rate">Colorado City, Arizona - Current Coverage (95% adult rate)<a class="anchor" aria-label="anchor" href="#colorado-city-arizona---current-coverage-95-adult-rate"></a>
</h3>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">colorado_data</span> <span class="op">&lt;-</span> <span class="va">city_data_list</span><span class="op">[[</span><span class="st">"Colorado City town, Arizona"</span><span class="op">]</span><span class="op">]</span></span>
<span></span>
<span><span class="va">colorado_current</span> <span class="op">&lt;-</span> <span class="fu">multigroup.vaccine</span><span class="fu">:::</span><span class="fu"><a href="../reference/getOutputTable.html">getOutputTable</a></span><span class="op">(</span></span>
<span>  agelims <span class="op">=</span> <span class="va">agelims</span>,</span>
<span>  agepops <span class="op">=</span> <span class="va">colorado_data</span><span class="op">$</span><span class="va">age_pops</span>,</span>
<span>  agecovr <span class="op">=</span> <span class="va">current_coverage_95</span>,</span>
<span>  ageveff <span class="op">=</span> <span class="va">ageveff</span>,</span>
<span>  initgrp <span class="op">=</span> <span class="va">initgrp</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nColorado City, Arizona - Current Vaccination Coverage\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Colorado City, Arizona - Current Vaccination Coverage</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">colorado_current</span><span class="op">)</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt;  R0  R0local       Rv pEscape escapeInfTot under5 5to9 10to14 15to19 20to24</span></span>
<span><span class="co">#&gt;  10 22.78073 11.93155   0.640          771     67  120    224    269     22</span></span>
<span><span class="co">#&gt;  11 25.05880 13.12470   0.681          775     68  120    224    269     22</span></span>
<span><span class="co">#&gt;  12 27.33687 14.31786   0.686          778     70  120    224    269     22</span></span>
<span><span class="co">#&gt;  13 29.61495 15.51101   0.715          781     71  120    224    269     23</span></span>
<span><span class="co">#&gt;  14 31.89302 16.70417   0.729          783     71  120    224    269     23</span></span>
<span><span class="co">#&gt;  15 34.17109 17.89732   0.771          784     72  120    224    269     23</span></span>
<span><span class="co">#&gt;  16 36.44917 19.09048   0.769          786     72  120    224    269     23</span></span>
<span><span class="co">#&gt;  17 38.72724 20.28363   0.785          786     73  120    224    269     23</span></span>
<span><span class="co">#&gt;  18 41.00531 21.47679   0.797          787     73  120    224    269     23</span></span>
<span><span class="co">#&gt;  25to29 30to34 35to39 40to44 45to49 50to54 55to59 60to64 65to69 70+</span></span>
<span><span class="co">#&gt;      15     10      7      6      9     11      8      3      1   0</span></span>
<span><span class="co">#&gt;      16     10      7      6      9     12      8      3      1   1</span></span>
<span><span class="co">#&gt;      16     10      7      6     10     12      8      4      1   1</span></span>
<span><span class="co">#&gt;      16     11      7      6     10     12      9      4      1   1</span></span>
<span><span class="co">#&gt;      16     11      7      6     10     12      9      4      1   1</span></span>
<span><span class="co">#&gt;      16     11      7      6     10     12      9      4      1   1</span></span>
<span><span class="co">#&gt;      17     11      7      6     10     13      9      4      1   1</span></span>
<span><span class="co">#&gt;      17     11      7      6     10     13      9      4      1   1</span></span>
<span><span class="co">#&gt;      17     11      7      6     10     13      9      4      1   1</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="visualization-comparing-cities">Visualization: Comparing Cities<a class="anchor" aria-label="anchor" href="#visualization-comparing-cities"></a>
</h2>
<p>Let’s visualize the outbreak potential across the two cities:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Extract R0=15 results for comparison</span></span>
<span><span class="va">r0_15_idx</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">hildale_current</span><span class="op">[</span>, <span class="st">"R0"</span><span class="op">]</span> <span class="op">==</span> <span class="fl">15</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Calculate combined city data</span></span>
<span><span class="va">combined_age_pops</span> <span class="op">&lt;-</span> <span class="va">hildale_data</span><span class="op">$</span><span class="va">age_pops</span> <span class="op">+</span> <span class="va">colorado_data</span><span class="op">$</span><span class="va">age_pops</span></span>
<span><span class="va">combined_total_pop</span> <span class="op">&lt;-</span> <span class="va">hildale_data</span><span class="op">$</span><span class="va">total_pop</span> <span class="op">+</span> <span class="va">colorado_data</span><span class="op">$</span><span class="va">total_pop</span></span>
<span></span>
<span><span class="va">combined_current</span> <span class="op">&lt;-</span> <span class="fu">multigroup.vaccine</span><span class="fu">:::</span><span class="fu"><a href="../reference/getOutputTable.html">getOutputTable</a></span><span class="op">(</span></span>
<span>  agelims <span class="op">=</span> <span class="va">agelims</span>,</span>
<span>  agepops <span class="op">=</span> <span class="va">combined_age_pops</span>,</span>
<span>  agecovr <span class="op">=</span> <span class="va">current_coverage_95</span>,</span>
<span>  ageveff <span class="op">=</span> <span class="va">ageveff</span>,</span>
<span>  initgrp <span class="op">=</span> <span class="va">initgrp</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">cities_names</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Hildale, UT"</span>, <span class="st">"Colorado City, AZ"</span>, <span class="st">"Combined"</span><span class="op">)</span></span>
<span><span class="va">escape_pcts</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="fl">100</span> <span class="op">*</span> <span class="va">hildale_current</span><span class="op">[</span><span class="va">r0_15_idx</span>, <span class="st">"escapeInfTot"</span><span class="op">]</span> <span class="op">/</span> <span class="va">hildale_data</span><span class="op">$</span><span class="va">total_pop</span>,</span>
<span>  <span class="fl">100</span> <span class="op">*</span> <span class="va">colorado_current</span><span class="op">[</span><span class="va">r0_15_idx</span>, <span class="st">"escapeInfTot"</span><span class="op">]</span> <span class="op">/</span> <span class="va">colorado_data</span><span class="op">$</span><span class="va">total_pop</span>,</span>
<span>  <span class="fl">100</span> <span class="op">*</span> <span class="va">combined_current</span><span class="op">[</span><span class="va">r0_15_idx</span>, <span class="st">"escapeInfTot"</span><span class="op">]</span> <span class="op">/</span> <span class="va">combined_total_pop</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create data frame for ggplot</span></span>
<span><span class="va">plot_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  City <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">cities_names</span>, levels <span class="op">=</span> <span class="va">cities_names</span><span class="op">)</span>,</span>
<span>  Percentage <span class="op">=</span> <span class="va">escape_pcts</span>,</span>
<span>  Color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#f7b360"</span>, <span class="st">"#9dd7da"</span>, <span class="st">"#c77dff"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">plot_data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">City</span>, y <span class="op">=</span> <span class="va">Percentage</span>, fill <span class="op">=</span> <span class="va">Color</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_bar</a></span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span>, width <span class="op">=</span> <span class="fl">0.7</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">geom_text</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"%.1f%%"</span>, <span class="va">Percentage</span><span class="op">)</span><span class="op">)</span>, vjust <span class="op">=</span> <span class="op">-</span><span class="fl">0.5</span>, size <span class="op">=</span> <span class="fl">4</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_identity.html" class="external-link">scale_fill_identity</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Potential Outbreak Size (R0=15)\nCurrent Coverage"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"City"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"% of Population Infected"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>axis.text.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">45</span>, hjust <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>        plot.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>hjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/lims.html" class="external-link">ylim</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">escape_pcts</span><span class="op">)</span> <span class="op">*</span> <span class="fl">1.1</span><span class="op">)</span></span></code></pre></div>
<p><img src="hildale_and_colorado_city_files/figure-html/plot-comparison-current-1.png" class="r-plt" width="1056"></p>
<p>Now with a lower R0 value:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Extract R0=10 results for comparison</span></span>
<span><span class="va">r0_10_idx</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">hildale_current</span><span class="op">[</span>, <span class="st">"R0"</span><span class="op">]</span> <span class="op">==</span> <span class="fl">10</span><span class="op">)</span></span>
<span></span>
<span><span class="va">escape_pcts_10</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="fl">100</span> <span class="op">*</span> <span class="va">hildale_current</span><span class="op">[</span><span class="va">r0_10_idx</span>, <span class="st">"escapeInfTot"</span><span class="op">]</span> <span class="op">/</span> <span class="va">hildale_data</span><span class="op">$</span><span class="va">total_pop</span>,</span>
<span>  <span class="fl">100</span> <span class="op">*</span> <span class="va">colorado_current</span><span class="op">[</span><span class="va">r0_10_idx</span>, <span class="st">"escapeInfTot"</span><span class="op">]</span> <span class="op">/</span> <span class="va">colorado_data</span><span class="op">$</span><span class="va">total_pop</span>,</span>
<span>  <span class="fl">100</span> <span class="op">*</span> <span class="va">combined_current</span><span class="op">[</span><span class="va">r0_10_idx</span>, <span class="st">"escapeInfTot"</span><span class="op">]</span> <span class="op">/</span> <span class="va">combined_total_pop</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create data frame for ggplot</span></span>
<span><span class="va">plot_data_10</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  City <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">cities_names</span>, levels <span class="op">=</span> <span class="va">cities_names</span><span class="op">)</span>,</span>
<span>  Percentage <span class="op">=</span> <span class="va">escape_pcts_10</span>,</span>
<span>  Color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#f7b360"</span>, <span class="st">"#9dd7da"</span>, <span class="st">"#c77dff"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">plot_data_10</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">City</span>, y <span class="op">=</span> <span class="va">Percentage</span>, fill <span class="op">=</span> <span class="va">Color</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_bar</a></span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span>, width <span class="op">=</span> <span class="fl">0.7</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">geom_text</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"%.1f%%"</span>, <span class="va">Percentage</span><span class="op">)</span><span class="op">)</span>, vjust <span class="op">=</span> <span class="op">-</span><span class="fl">0.5</span>, size <span class="op">=</span> <span class="fl">4</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_identity.html" class="external-link">scale_fill_identity</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Potential Outbreak Size (R0=10)\nCurrent Coverage"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"City"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"% of Population Infected"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>axis.text.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">45</span>, hjust <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>        plot.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>hjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/lims.html" class="external-link">ylim</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">escape_pcts_10</span><span class="op">)</span> <span class="op">*</span> <span class="fl">1.1</span><span class="op">)</span></span></code></pre></div>
<p><img src="hildale_and_colorado_city_files/figure-html/plot-comparison-current-r0-10-1.png" class="r-plt" width="1056"></p>
</div>
<div class="section level2">
<h2 id="comparison-of-r0-values-with-trend-analysis">Comparison of R0 Values with Trend Analysis<a class="anchor" aria-label="anchor" href="#comparison-of-r0-values-with-trend-analysis"></a>
</h2>
<p>Let’s compare how different R0 values impact the outbreak size (in %
of pop) in these communities under current vaccination coverage,
including trendlines and statistical comparison:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">r0_values</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">11</span>, <span class="fl">12</span>, <span class="fl">13</span>, <span class="fl">14</span>, <span class="fl">15</span>, <span class="fl">16</span>, <span class="fl">17</span>, <span class="fl">18</span><span class="op">)</span></span>
<span><span class="va">hildale_percents</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">r0_values</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">colorado_percents</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">r0_values</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">combined_percents</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">r0_values</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_along</a></span><span class="op">(</span><span class="va">r0_values</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">r0_idx_hildale</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">hildale_current</span><span class="op">[</span>, <span class="st">"R0"</span><span class="op">]</span> <span class="op">==</span> <span class="va">r0_values</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span></span>
<span>  <span class="va">r0_idx_colorado</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">colorado_current</span><span class="op">[</span>, <span class="st">"R0"</span><span class="op">]</span> <span class="op">==</span> <span class="va">r0_values</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span></span>
<span>  <span class="va">r0_idx_combined</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">combined_current</span><span class="op">[</span>, <span class="st">"R0"</span><span class="op">]</span> <span class="op">==</span> <span class="va">r0_values</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span></span>
<span></span>
<span>  <span class="va">hildale_percents</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">100</span> <span class="op">*</span> <span class="va">hildale_current</span><span class="op">[</span><span class="va">r0_idx_hildale</span>, <span class="st">"escapeInfTot"</span><span class="op">]</span> <span class="op">/</span> <span class="va">hildale_data</span><span class="op">$</span><span class="va">total_pop</span></span>
<span>  <span class="va">colorado_percents</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">100</span> <span class="op">*</span> <span class="va">colorado_current</span><span class="op">[</span><span class="va">r0_idx_colorado</span>, <span class="st">"escapeInfTot"</span><span class="op">]</span> <span class="op">/</span> <span class="va">colorado_data</span><span class="op">$</span><span class="va">total_pop</span></span>
<span>  <span class="va">combined_percents</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">100</span> <span class="op">*</span> <span class="va">combined_current</span><span class="op">[</span><span class="va">r0_idx_combined</span>, <span class="st">"escapeInfTot"</span><span class="op">]</span> <span class="op">/</span> <span class="va">combined_total_pop</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Create data frame for ggplot</span></span>
<span><span class="va">r0_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  R0 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="va">r0_values</span>, <span class="fl">3</span><span class="op">)</span>,</span>
<span>  Percentage <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">hildale_percents</span>, <span class="va">colorado_percents</span>, <span class="va">combined_percents</span><span class="op">)</span>,</span>
<span>  City <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Hildale, UT"</span>, <span class="st">"Colorado City, AZ"</span>, <span class="st">"Combined"</span><span class="op">)</span>, each <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">r0_values</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  Color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"blue"</span>, <span class="st">"red"</span>, <span class="st">"purple"</span><span class="op">)</span>, each <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">r0_values</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Fit linear models for trendlines</span></span>
<span><span class="va">hildale_lm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">hildale_percents</span> <span class="op">~</span> <span class="va">r0_values</span><span class="op">)</span></span>
<span><span class="va">colorado_lm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">colorado_percents</span> <span class="op">~</span> <span class="va">r0_values</span><span class="op">)</span></span>
<span><span class="va">combined_lm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">combined_percents</span> <span class="op">~</span> <span class="va">r0_values</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create trendline data</span></span>
<span><span class="va">trend_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  R0 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="va">r0_values</span>, <span class="fl">3</span><span class="op">)</span>,</span>
<span>  Trend <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">hildale_lm</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">colorado_lm</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">combined_lm</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  City <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Hildale, UT"</span>, <span class="st">"Colorado City, AZ"</span>, <span class="st">"Combined"</span><span class="op">)</span>, each <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">r0_values</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">r0_data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">R0</span>, y <span class="op">=</span> <span class="va">Percentage</span>, color <span class="op">=</span> <span class="va">City</span><span class="op">)</span>, size <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">r0_data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">R0</span>, y <span class="op">=</span> <span class="va">Percentage</span>, color <span class="op">=</span> <span class="va">City</span><span class="op">)</span>, size <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">trend_data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">R0</span>, y <span class="op">=</span> <span class="va">Trend</span>, color <span class="op">=</span> <span class="va">City</span><span class="op">)</span>, linetype <span class="op">=</span> <span class="st">"dashed"</span>, size <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_color_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Hildale, UT"</span> <span class="op">=</span> <span class="st">"blue"</span>, <span class="st">"Colorado City, AZ"</span> <span class="op">=</span> <span class="st">"red"</span>, <span class="st">"Combined"</span> <span class="op">=</span> <span class="st">"purple"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Outbreak Size vs R0 Value\n(Current Vaccination Coverage)"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"R0 Value"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"% of Population Infected"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>plot.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>hjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/lims.html" class="external-link">ylim</a></span><span class="op">(</span><span class="fl">15</span>, <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">r0_data</span><span class="op">$</span><span class="va">Percentage</span><span class="op">)</span> <span class="op">*</span> <span class="fl">1.1</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Please use `linewidth` instead.</span></span>
<span><span class="co">#&gt; <span style="color: #555555;">This warning is displayed once every 8 hours.</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">Call `lifecycle::last_lifecycle_warnings()` to see where this warning was</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">generated.</span></span></span></code></pre></div>
<p><img src="hildale_and_colorado_city_files/figure-html/r0-comparison-plot-1.png" class="r-plt" width="1056"></p>
</div>
<div class="section level2">
<h2 id="statistical-comparison-of-trendlines">Statistical Comparison of Trendlines<a class="anchor" aria-label="anchor" href="#statistical-comparison-of-trendlines"></a>
</h2>
<p>Let’s perform a statistical comparison of the relationship between R0
values and outbreak size for the cities and combined population:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Extract slope coefficients and their standard errors</span></span>
<span><span class="va">hildale_summary</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">hildale_lm</span><span class="op">)</span></span>
<span><span class="va">colorado_summary</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">colorado_lm</span><span class="op">)</span></span>
<span><span class="va">combined_summary</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">combined_lm</span><span class="op">)</span></span>
<span></span>
<span><span class="va">hildale_slope</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/coef.html" class="external-link">coef</a></span><span class="op">(</span><span class="va">hildale_summary</span><span class="op">)</span><span class="op">[</span><span class="fl">2</span>, <span class="fl">1</span><span class="op">]</span></span>
<span><span class="va">hildale_se</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/coef.html" class="external-link">coef</a></span><span class="op">(</span><span class="va">hildale_summary</span><span class="op">)</span><span class="op">[</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">]</span></span>
<span></span>
<span><span class="va">colorado_slope</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/coef.html" class="external-link">coef</a></span><span class="op">(</span><span class="va">colorado_summary</span><span class="op">)</span><span class="op">[</span><span class="fl">2</span>, <span class="fl">1</span><span class="op">]</span></span>
<span><span class="va">colorado_se</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/coef.html" class="external-link">coef</a></span><span class="op">(</span><span class="va">colorado_summary</span><span class="op">)</span><span class="op">[</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">]</span></span>
<span></span>
<span><span class="va">combined_slope</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/coef.html" class="external-link">coef</a></span><span class="op">(</span><span class="va">combined_summary</span><span class="op">)</span><span class="op">[</span><span class="fl">2</span>, <span class="fl">1</span><span class="op">]</span></span>
<span><span class="va">combined_se</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/coef.html" class="external-link">coef</a></span><span class="op">(</span><span class="va">combined_summary</span><span class="op">)</span><span class="op">[</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Output results</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Statistical Comparison of R0-Outbreak Size Relationships\n\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Statistical Comparison of R0-Outbreak Size Relationships</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Hildale, UT:\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Hildale, UT:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"  Slope: %.4f (SE: %.4f)\n"</span>, <span class="va">hildale_slope</span>, <span class="va">hildale_se</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;   Slope: 0.0974 (SE: 0.0101)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"  R²: %.4f\n"</span>, <span class="va">hildale_summary</span><span class="op">$</span><span class="va">r.squared</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;   R²: 0.9296</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Colorado City, AZ:\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Colorado City, AZ:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"  Slope: %.4f (SE: %.4f)\n"</span>, <span class="va">colorado_slope</span>, <span class="va">colorado_se</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;   Slope: 0.0744 (SE: 0.0082)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"  R²: %.4f\n"</span>, <span class="va">colorado_summary</span><span class="op">$</span><span class="va">r.squared</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;   R²: 0.9208</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Combined Cities:\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Combined Cities:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"  Slope: %.4f (SE: %.4f)\n"</span>, <span class="va">combined_slope</span>, <span class="va">combined_se</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;   Slope: 0.0804 (SE: 0.0084)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"  R²: %.4f\n"</span>, <span class="va">combined_summary</span><span class="op">$</span><span class="va">r.squared</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;   R²: 0.9288</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\n"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Summary:\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Summary:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"The combined population shows the most gradual increase in outbreak size with R0,\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; The combined population shows the most gradual increase in outbreak size with R0,</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"suggesting that aggregating the populations provides a more stable epidemic profile.\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; suggesting that aggregating the populations provides a more stable epidemic profile.</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="scenario-2-linear-interpolation-of-adult-vaccination-rates">Scenario 2: Linear Interpolation of Adult Vaccination Rates<a class="anchor" aria-label="anchor" href="#scenario-2-linear-interpolation-of-adult-vaccination-rates"></a>
</h2>
<p>Let’s model outbreaks under this interpolated adult vaccination
coverage.</p>
<p>We will interpolate vaccination rate for adults between the end of
highschool age up to 95% for the 49-65 age groups.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Define age limits and corresponding coverage rates</span></span>
<span><span class="co"># current_coverage_95 is defined above</span></span>
<span><span class="co"># for 20, 25, 30, 35, 40, 45, 50 adjust the rate to interpolate between 45% and 95%</span></span>
<span><span class="va">adult_ages</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">15</span>, <span class="fl">20</span>, <span class="fl">25</span>, <span class="fl">30</span>, <span class="fl">35</span>, <span class="fl">40</span>, <span class="fl">45</span>, <span class="fl">50</span><span class="op">)</span></span>
<span><span class="va">adult_rates</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0.45</span>, <span class="fl">0.95</span>, length.out <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">adult_ages</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">linear_coverage</span> <span class="op">&lt;-</span> <span class="va">current_coverage_95</span></span>
<span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_along</a></span><span class="op">(</span><span class="va">adult_ages</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">age</span> <span class="op">&lt;-</span> <span class="va">adult_ages</span><span class="op">[</span><span class="va">i</span><span class="op">]</span></span>
<span>  <span class="va">rate</span> <span class="op">&lt;-</span> <span class="va">adult_rates</span><span class="op">[</span><span class="va">i</span><span class="op">]</span></span>
<span>  <span class="va">age_idx</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">agelims</span><span class="op">[</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">agelims</span><span class="op">)</span><span class="op">]</span> <span class="op">==</span> <span class="va">age</span><span class="op">)</span></span>
<span>  <span class="va">linear_coverage</span><span class="op">[</span><span class="va">age_idx</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">rate</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Interpolated Adult Vaccination Coverage Rates:\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Interpolated Adult Vaccination Coverage Rates:</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_along</a></span><span class="op">(</span><span class="va">adult_ages</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">age</span> <span class="op">&lt;-</span> <span class="va">adult_ages</span><span class="op">[</span><span class="va">i</span><span class="op">]</span></span>
<span>  <span class="va">age_idx</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">agelims</span><span class="op">[</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">agelims</span><span class="op">)</span><span class="op">]</span> <span class="op">==</span> <span class="va">age</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"  Age %d: %.2f%%\n"</span>, <span class="va">age</span>, <span class="va">linear_coverage</span><span class="op">[</span><span class="va">age_idx</span><span class="op">]</span> <span class="op">*</span> <span class="fl">100</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="co">#&gt;   Age 15: 45.00%</span></span>
<span><span class="co">#&gt;   Age 20: 52.14%</span></span>
<span><span class="co">#&gt;   Age 25: 59.29%</span></span>
<span><span class="co">#&gt;   Age 30: 66.43%</span></span>
<span><span class="co">#&gt;   Age 35: 73.57%</span></span>
<span><span class="co">#&gt;   Age 40: 80.71%</span></span>
<span><span class="co">#&gt;   Age 45: 87.86%</span></span>
<span><span class="co">#&gt;   Age 50: 95.00%</span></span></code></pre></div>
<div class="section level3">
<h3 id="combined-communities-visualization">Combined communities visualization<a class="anchor" aria-label="anchor" href="#combined-communities-visualization"></a>
</h3>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Extract R0=15 results for comparison</span></span>
<span><span class="co"># combine the two communities populations into one and run the sim on this combined data</span></span>
<span><span class="va">combined_pops</span> <span class="op">&lt;-</span> <span class="va">hildale_data</span><span class="op">$</span><span class="va">age_pops</span> <span class="op">+</span> <span class="va">colorado_data</span><span class="op">$</span><span class="va">age_pops</span></span>
<span></span>
<span><span class="va">combined_95</span> <span class="op">&lt;-</span> <span class="fu">multigroup.vaccine</span><span class="fu">:::</span><span class="fu"><a href="../reference/getOutputTable.html">getOutputTable</a></span><span class="op">(</span></span>
<span>  agelims <span class="op">=</span> <span class="va">agelims</span>,</span>
<span>  agepops <span class="op">=</span> <span class="va">combined_pops</span>,</span>
<span>  agecovr <span class="op">=</span> <span class="va">current_coverage_95</span>,</span>
<span>  ageveff <span class="op">=</span> <span class="va">ageveff</span>,</span>
<span>  initgrp <span class="op">=</span> <span class="va">initgrp</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># print results for current coverage</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Combined Cities - Current Vaccination Coverage (95% adult rate)\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Combined Cities - Current Vaccination Coverage (95% adult rate)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">combined_95</span><span class="op">)</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt;  R0  R0local       Rv pEscape escapeInfTot under5 5to9 10to14 15to19 20to24</span></span>
<span><span class="co">#&gt;  10 21.07870 10.90532   0.645         1098     97  182    317    358     31</span></span>
<span><span class="co">#&gt;  11 23.18656 11.99586   0.680         1104     99  182    317    358     31</span></span>
<span><span class="co">#&gt;  12 25.29443 13.08639   0.678         1110    101  182    317    358     32</span></span>
<span><span class="co">#&gt;  13 27.40230 14.17692   0.730         1114    103  182    317    358     32</span></span>
<span><span class="co">#&gt;  14 29.51017 15.26745   0.727         1117    104  182    317    358     32</span></span>
<span><span class="co">#&gt;  15 31.61804 16.35799   0.730         1119    105  182    317    358     33</span></span>
<span><span class="co">#&gt;  16 33.72591 17.44852   0.750         1121    105  182    317    358     33</span></span>
<span><span class="co">#&gt;  17 35.83378 18.53905   0.771         1123    106  182    317    358     33</span></span>
<span><span class="co">#&gt;  18 37.94165 19.62958   0.760         1124    106  182    317    358     33</span></span>
<span><span class="co">#&gt;  25to29 30to34 35to39 40to44 45to49 50to54 55to59 60to64 65to69 70+</span></span>
<span><span class="co">#&gt;      24     14     15     10     17     15     10      5      2   1</span></span>
<span><span class="co">#&gt;      25     15     15     11     18     16     10      5      2   1</span></span>
<span><span class="co">#&gt;      25     15     15     11     18     16     11      6      2   1</span></span>
<span><span class="co">#&gt;      25     15     15     11     18     17     11      6      2   1</span></span>
<span><span class="co">#&gt;      26     15     16     11     18     17     11      6      2   1</span></span>
<span><span class="co">#&gt;      26     16     16     11     19     17     11      6      2   1</span></span>
<span><span class="co">#&gt;      26     16     16     11     19     17     12      7      2   1</span></span>
<span><span class="co">#&gt;      26     16     16     11     19     17     12      7      2   1</span></span>
<span><span class="co">#&gt;      27     16     16     11     19     18     12      7      2   1</span></span>
<span></span>
<span><span class="va">combined_linear</span> <span class="op">&lt;-</span> <span class="fu">multigroup.vaccine</span><span class="fu">:::</span><span class="fu"><a href="../reference/getOutputTable.html">getOutputTable</a></span><span class="op">(</span></span>
<span>  agelims <span class="op">=</span> <span class="va">agelims</span>,</span>
<span>  agepops <span class="op">=</span> <span class="va">combined_pops</span>,</span>
<span>  agecovr <span class="op">=</span> <span class="va">linear_coverage</span>,</span>
<span>  ageveff <span class="op">=</span> <span class="va">ageveff</span>,</span>
<span>  initgrp <span class="op">=</span> <span class="va">initgrp</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Combined Cities - Linear Interpolated Adult Vaccination Coverage\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Combined Cities - Linear Interpolated Adult Vaccination Coverage</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">combined_linear</span><span class="op">)</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt;  R0  R0local       Rv pEscape escapeInfTot under5 5to9 10to14 15to19 20to24</span></span>
<span><span class="co">#&gt;  10 21.07870 11.10596   0.776         1540    103  182    317    358    208</span></span>
<span><span class="co">#&gt;  11 23.18656 12.21655   0.793         1545    104  182    317    358    209</span></span>
<span><span class="co">#&gt;  12 25.29443 13.32715   0.809         1549    105  182    317    358    209</span></span>
<span><span class="co">#&gt;  13 27.40230 14.43774   0.830         1551    106  182    317    358    209</span></span>
<span><span class="co">#&gt;  14 29.51017 15.54834   0.857         1553    107  182    317    358    209</span></span>
<span><span class="co">#&gt;  15 31.61804 16.65894   0.864         1554    107  182    317    358    209</span></span>
<span><span class="co">#&gt;  16 33.72591 17.76953   0.872         1555    107  182    317    358    209</span></span>
<span><span class="co">#&gt;  17 35.83378 18.88013   0.862         1556    107  182    317    358    209</span></span>
<span><span class="co">#&gt;  18 37.94165 19.99072   0.872         1556    108  182    317    358    209</span></span>
<span><span class="co">#&gt;  25to29 30to34 35to39 40to44 45to49 50to54 55to59 60to64 65to69 70+</span></span>
<span><span class="co">#&gt;     144     69     57     29     34     17     12      7      2   1</span></span>
<span><span class="co">#&gt;     145     70     57     30     34     17     12      7      2   1</span></span>
<span><span class="co">#&gt;     145     70     57     30     35     18     12      7      2   1</span></span>
<span><span class="co">#&gt;     146     71     58     30     35     18     12      7      2   1</span></span>
<span><span class="co">#&gt;     146     71     58     30     35     18     12      7      2   1</span></span>
<span><span class="co">#&gt;     146     71     58     30     35     18     13      7      3   2</span></span>
<span><span class="co">#&gt;     146     71     58     30     35     18     13      7      3   2</span></span>
<span><span class="co">#&gt;     146     71     58     30     35     18     13      8      3   2</span></span>
<span><span class="co">#&gt;     146     71     58     30     35     18     13      8      3   2</span></span>
<span></span>
<span><span class="va">r0_15_idx</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">combined_linear</span><span class="op">[</span>, <span class="st">"R0"</span><span class="op">]</span> <span class="op">==</span> <span class="fl">15</span><span class="op">)</span></span>
<span><span class="va">r0_15_idx_95</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">combined_95</span><span class="op">[</span>, <span class="st">"R0"</span><span class="op">]</span> <span class="op">==</span> <span class="fl">15</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Combine both scenarios into a single bar chart</span></span>
<span><span class="va">combined_percentages</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="fl">100</span> <span class="op">*</span> <span class="va">combined_95</span><span class="op">[</span><span class="va">r0_15_idx_95</span>, <span class="st">"escapeInfTot"</span><span class="op">]</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">combined_pops</span><span class="op">)</span>,</span>
<span>  <span class="fl">100</span> <span class="op">*</span> <span class="va">combined_linear</span><span class="op">[</span><span class="va">r0_15_idx</span>, <span class="st">"escapeInfTot"</span><span class="op">]</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">combined_pops</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">scenario_names</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Current Coverage\n(95% adult rate)"</span>, <span class="st">"Linear Interpolated\nAdult Coverage"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create data frame for ggplot</span></span>
<span><span class="va">scenario_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  Scenario <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">scenario_names</span>, levels <span class="op">=</span> <span class="va">scenario_names</span><span class="op">)</span>,</span>
<span>  Percentage <span class="op">=</span> <span class="va">combined_percentages</span>,</span>
<span>  Color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#f7b360"</span>, <span class="st">"#9dd7da"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">scenario_data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">Scenario</span>, y <span class="op">=</span> <span class="va">Percentage</span>, fill <span class="op">=</span> <span class="va">Color</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_bar</a></span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span>, width <span class="op">=</span> <span class="fl">0.7</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">geom_text</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"%.1f%%"</span>, <span class="va">Percentage</span><span class="op">)</span><span class="op">)</span>, vjust <span class="op">=</span> <span class="op">-</span><span class="fl">0.5</span>, size <span class="op">=</span> <span class="fl">4</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_identity.html" class="external-link">scale_fill_identity</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Combined Communities: % of Population Infected (R0=15)"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Vaccination Scenario"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"% of Population Infected"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>axis.text.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">45</span>, hjust <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>        plot.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>hjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/lims.html" class="external-link">ylim</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">combined_percentages</span><span class="op">)</span> <span class="op">*</span> <span class="fl">1.1</span><span class="op">)</span></span></code></pre></div>
<p><img src="hildale_and_colorado_city_files/figure-html/combined-linear-plot-1.png" class="r-plt" width="1056"></p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Damon Toth, Jake Wagoner, Centers for Disease Control and Prevention’s Center for Forecasting and Outbreak Analytics.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
